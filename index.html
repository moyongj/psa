<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘ç»œå®‰å…¨æ•™å­¦å·¥å…·ï¼šå¯†ç å¼ºåº¦åˆ†æå™¨ by è‚–ç«‹å²š</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }

        body {
            background-color: #1E1E1E;
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .title {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0 40px;
        }

        .input-group {
            width: 100%;
            margin: 20px 0;
        }

        .password-input {
            width: 100%;
            padding: 15px;
            font-size: 32px;
            background: #333333;
            border: none;
            color: white;
            border-radius: 4px;
        }

        .analyze-btn {
            display: block;
            margin: 20px auto;
            padding: 20px 40px;
            background: #007ACC;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }

        .analyze-btn:hover {
            background: #0062A3;
        }

        .result-panel {
            background: #333333;
            padding: 20px;
            border-radius: 4px;
            margin-top: 20px;
        }

        .result-item {
            margin: 20px 0;
            line-height: 1.6;
        }

        .crack-time {
            font-size: 20px;
            font-weight: bold;
        }

        .strength-level {
            font-size: 16px;
            color: #CCCCCC;
        }

        .entropy-value {
            font-size: 12px;
            color: #999999;
        }

        .suggestion {
            font-size: 20px;
            color: #FF4444;
            white-space: pre-wrap;
        }

        .generator-section {
            background: #2D2D2D;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .generator-controls {
            display: grid;
            gap: 15px;
            margin: 15px 0;
        }

        .length-row {
            display: grid;
            grid-template-columns: 100px 1fr;
            align-items: center;
            font-size: 18px; /* è°ƒå°å­—ä½“ */
        }

        .options-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            font-size: 18px; /* æ›´å°çš„å­—ä½“ */
        }

        .generator-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #pwd-length {
            width: 80px;
            padding: 6px;
            font-size: 14px;
        }
        .history-panel {
            background: #333;
            padding: 15px;
            margin-top: 20px;
            border-radius: 6px;
            max-height: 200px;
            overflow-y: auto;
        }

        .history-item {
            padding: 8px;
            border-bottom: 1px solid #444;
            font-size: 0.9em;
        }

        .breach-alert {
            color: #ff4444;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }

        .copy-btn {
            background: #007ACC;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">ğŸ” ç½‘ç»œå®‰å…¨æ•™å­¦å·¥å…·ï¼šå¯†ç å¼ºåº¦åˆ†æå™¨ by è‚–ç«‹å²š</h1>
        
        <div class="input-group">
            <input type="text" class="password-input" placeholder="è¾“å…¥å¯†ç ">
        </div>
        
        <button class="analyze-btn" onclick="analyzePassword()">ç«‹å³åˆ†æ</button>
        
        <div class="result-panel">
            <div class="result-item crack-time">é¢„è®¡ç ´è§£æ—¶é—´ï¼š-</div>
            <div class="result-item strength-level">å¯†ç å¼ºåº¦ï¼š-</div>
            <div class="result-item entropy-value">ç†µå€¼ï¼š-</div>
            <div class="result-item suggestion">å®‰å…¨å»ºè®®ï¼šç­‰å¾…è¾“å…¥...</div>
        </div>

        <!-- ä¿®æ”¹å¯†ç ç”Ÿæˆå™¨éƒ¨åˆ† -->
        <div class="generator-section">
            <h3>ğŸ”‘ å®‰å…¨å¯†ç ç”Ÿæˆå™¨</h3>
            <div class="generator-controls">
                <!-- å¯†ç é•¿åº¦å•ç‹¬ä¸€è¡Œ -->
                <div class="length-row">
                    <label>å¯†ç é•¿åº¦ï¼š</label>
                    <input type="number" id="pwd-length" value="12" min="8" max="32">
                </div>

                <!-- é€‰é¡¹å•ç‹¬ä¸€è¡Œ -->
                <div class="options-row">
                    <div class="generator-option">
                        <input type="checkbox" id="lower" checked> 
                        <label for="lower">å°å†™å­—æ¯</label>
                    </div>
                    <div class="generator-option">
                        <input type="checkbox" id="upper"> 
                        <label for="upper">å¤§å†™å­—æ¯</label>
                    </div>
                    <div class="generator-option">
                        <input type="checkbox" id="numbers" checked> 
                        <label for="numbers">æ•°å­—</label>
                    </div>
                    <div class="generator-option">
                        <input type="checkbox" id="symbols"> 
                        <label for="symbols">ç¬¦å·</label>
                    </div>
                </div>
            </div>
                    <button class="analyze-btn" onclick="generatePassword()">ç”Ÿæˆå¯†ç </button>
                    <div class="generated-password" style="margin-top:15px">
                        <input type="text" id="generated-pwd" readonly 
                               style="width:60%;padding:8px">
                        <button class="copy-btn" onclick="copyPassword()">å¤åˆ¶</button>
                    </div>
                </div>
        
                <!-- æ–°å¢å†å²è®°å½• -->
                <div class="history-panel">
                    <h4>ğŸ“œ åˆ†æå†å²ï¼ˆæœ€è¿‘10æ¡ï¼‰</h4>
                    <div id="history-list"></div>
                </div>
            </div>
    </div>

    <script>
        function calculateEntropy(password) {
            const charSets = {
                lower: 26,
                upper: 26,
                digit: 10,
                special: 32
            };

            let charsetSize = 0;
            if (/[a-z]/.test(password)) charsetSize += charSets.lower;
            if (/[A-Z]/.test(password)) charsetSize += charSets.upper;
            if (/\d/.test(password)) charsetSize += charSets.digit;
            if (/[^a-zA-Z0-9]/.test(password)) charsetSize += charSets.special;
            
            return charsetSize === 0 ? 0 : password.length * Math.log2(charsetSize);
        }

        function estimateCrackTime(entropy) {
            const ATTACK_SPEED = 1e6;
            const combinations = Math.pow(2, entropy);
            let seconds = combinations / ATTACK_SPEED;

            const timeUnits = [
                ['ç§’', 1],
                ['åˆ†é’Ÿ', 60],
                ['å°æ—¶', 3600],
                ['å¤©', 86400],
                ['å¹´', 31536000]
            ];

            for (let i = timeUnits.length - 1; i >= 0; i--) {
                const [unit, divisor] = timeUnits[i];
                if (seconds >= divisor) {
                    return `${(seconds / divisor).toLocaleString(undefined, {maximumFractionDigits:1})} ${unit}`;
                }
            }
            return "ç¬é—´";
        }

        function evaluateStrength(seconds) {
            if (seconds < 60) return { level: "å¼±", color: "#FF4444" };
            if (seconds < 31536000) return { level: "ä¸­ç­‰", color: "#FFC107" };
            return { level: "å¼º", color: "#00C853" };
        }

        function generateSuggestions(password) {
            const suggestions = [];
            
            if (password.length < 12) {
                suggestions.push("â– å»¶é•¿å¯†ç è‡³12ä½ä»¥ä¸Š");
            }

            let charTypes = 0;
            if (/[A-Z]/.test(password)) charTypes++;
            if (/[a-z]/.test(password)) charTypes++;
            if (/\d/.test(password)) charTypes++;
            if (/[^a-zA-Z0-9]/.test(password)) charTypes++;
            if (charTypes < 3) {
                suggestions.push("â– æ··åˆ3ç§ä»¥ä¸Šå­—ç¬¦ç±»å‹ï¼ˆå¤§å°å†™+æ•°å­—+ç¬¦å·ï¼‰");
            }

            if (/(.)\1{2}/.test(password)) {
                suggestions.push("â– é¿å…3ä¸ªä»¥ä¸Šé‡å¤å­—ç¬¦ï¼ˆå¦‚aaa/111ï¼‰");
            }

            if (/123|qwe|asd/i.test(password)) {
                suggestions.push("â– ä¸è¦ä½¿ç”¨é”®ç›˜è¿ç»­åºåˆ—");
            }

            return suggestions.length > 0 
                ? suggestions.join("\n")
                : "âœ… å½“å‰å¯†ç å®‰å…¨æ€§è‰¯å¥½";
        }

        function analyzePassword() {
            const password = document.querySelector('.password-input').value;
            
            if (!password) {
                alert("è¯·è¾“å…¥è¦æ£€æµ‹çš„å¯†ç ");
                return;
            }

            if (/[\u4e00-\u9fff]/.test(password)) {
                alert("å¯†ç ä¸èƒ½åŒ…å«ä¸­æ–‡å­—ç¬¦ï¼");
                document.querySelector('.password-input').value = '';
                return;
            }

            const entropy = calculateEntropy(password);
            const crackTimeText = estimateCrackTime(entropy);
            const seconds = Math.pow(2, entropy) / 1e6;
            const strength = evaluateStrength(seconds);
            const suggestions = generateSuggestions(password);

            // æ›´æ–°ç•Œé¢
            document.querySelector('.crack-time').textContent = `é¢„è®¡ç ´è§£æ—¶é—´ï¼š${crackTimeText}`;
            document.querySelector('.crack-time').style.color = strength.color;
            document.querySelector('.strength-level').textContent = `å¯†ç å¼ºåº¦ï¼š${strength.level}`;
            document.querySelector('.strength-level').style.color = strength.color;
            document.querySelector('.entropy-value').textContent = `ç†µå€¼ï¼š${entropy.toFixed(1)} bits`;
            document.querySelector('.suggestion').textContent = `å®‰å…¨å»ºè®®ï¼š\n${suggestions}`;

            updateHistory({
                password: password, // æ·»åŠ è¿™è¡Œä¼ é€’åŸå§‹å¯†ç 
                strength: strength,
                crackTime: crackTimeText, 
                entropy: entropy
            }); // å¢åŠ è¿™ä¸ªå‡½æ•°è°ƒç”¨

        }
                // ================= æ–°å¢å¯†ç ç”Ÿæˆå™¨åŠŸèƒ½ =================
                const charSets = {
            lower: 'abcdefghijklmnopqrstuvwxyz',
            upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            numbers: '0123456789',
            symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?'
        };

        function generatePassword() {
            const length = parseInt(document.getElementById('pwd-length').value) || 12;
            const options = {
                lower: document.getElementById('lower').checked,
                upper: document.getElementById('upper').checked,
                numbers: document.getElementById('numbers').checked,
                symbols: document.getElementById('symbols').checked
            };

            let chars = '';
            for (const [type, enabled] of Object.entries(options)) {
                if (enabled) chars += charSets[type];
            }

            if (!chars) {
                alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦ç±»å‹ï¼');
                return;
            }

            let password = '';
            for (let i = 0; i < length; i++) {
                password += chars[Math.floor(Math.random() * chars.length)];
            }

            // æ‰“æ•£å­—ç¬¦é¡ºåº
            password = password.split('').sort(() => Math.random() - 0.5).join('');
            document.getElementById('generated-pwd').value = password;
        }

        function copyPassword() {
            const pwdField = document.getElementById('generated-pwd');
            pwdField.select();
            document.execCommand('copy');
            alert('å¯†ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
        }

        // ================= æ–°å¢å†å²è®°å½•åŠŸèƒ½ =================
        const MAX_HISTORY = 10;
        let history = JSON.parse(localStorage.getItem('pwdHistory') || '[]');

        // ä¿®æ­£å‡½æ•°å®šä¹‰
        function updateHistory(result) {
            history.unshift({
                timestamp: new Date().toLocaleString(),
                strength: {
                    level: result.strength.level,
                    color: result.strength.color
                },
                entropy: result.entropy,
                crackTime: result.crackTime,
                password:result.password,
                length: result.password.length
            });

            if (history.length > MAX_HISTORY) history.pop();
            localStorage.setItem('pwdHistory', JSON.stringify(history));
            renderHistory(); // ç§»åŠ¨åˆ°è¿™é‡Œè°ƒç”¨
        }

        function renderHistory() {
            const list = document.getElementById('history-list');
            list.innerHTML = history.map(item => `
                <div class="history-item">
                    [${item.timestamp}] 
                    å¯†ç : ${item.password} 
                    â¤ å¼ºåº¦: <span style="color:${item.strength.color}">${item.strength.level}</span>
                    (ç ´è§£æ—¶é—´: ${item.crackTime})
                </div>
            `).join('');

            // æ·»åŠ ç©ºçŠ¶æ€æç¤º
            if (history.length === 0) {
                list.innerHTML = '<div class="history-item">æš‚æ— åˆ†æè®°å½•</div>';
            }
        }

        // æ–°å¢åˆå§‹åŒ–åŠ è½½
        document.addEventListener('DOMContentLoaded', renderHistory);

    </script>
</body>
</html>
